(function(){var t=function(e,i,r,o){if(!(this instanceof t))return new t(e,i,r,o);if("string"!=typeof e)throw new TypeError("A name is required for all fields");if("string"!=typeof i)throw new TypeError("A type is required for all fields");if("object"!=typeof r&&(r={}),r.rules===void 0)r.rules=[];else if(!(r.rules instanceof Array))throw new TypeError("the rules must be defined as an array");if(r.attributes=r.attributes||{},r.attributes.name=e,r.attributes.id=r.id||"",-1===["textarea","select"].indexOf(i)&&(r.attributes.type=i,r.attributes.value=r.value||""),this.name=e,this.type=i,this.value=r.value||"",this.label=r.label,this.attributes=r.attributes,this.rules=r.rules,this.fieldJSON=r,this.errors={},-1!==["select","radio","checkbox"].indexOf(this.type)&&(this.options=r.options),this.opts={},t.defaultOpts!==void 0)for(var s in t.defaultOpts)this.opts[s]=t.defaultOpts[s];if(o!==void 0)for(var s in o)this.opts[s]=o[s];t.trigger(this,"init")};t.prototype.setError=function(e,i){this.errors[e]=i,t.trigger(this,"setError")},t.prototype.clearError=function(e){return this.errors[e]!==void 0?delete this.errors[e]:(e===void 0&&(this.errors={}),t.trigger(this,"clearError"),void 0)},t.prototype.serialize=function(t){var e={name:this.name,type:this.type,value:this.value,label:this.label,rules:this.rules,errors:this.errors};return-1!==["select","radio","checkbox"].indexOf(this.type)&&(e.options=this.options),t=t!==void 0?t:!1,t?JSON.stringify(e):e},t.on=function(e,i){t._hooks===void 0&&(t._hooks={}),t._hooks[e]===void 0&&(t._hooks[e]=[]),t._hooks[e].push(i)},t.trigger=function(e,i){if(void 0!==t._hooks&&"undefined"!==t._hooks[i])for(var r=0,o=t._hooks[i].length;o>r;r++)t._hooks[i][r].apply(e,Array.prototype.slice.call(arguments,2))},"undefined"!=typeof exports?exports.Field=t:(window.UniversalForms=window.UniversalForms||{},window.UniversalForms.Field=t)})(),function(){var t=function(e,i){if(!(this instanceof t))return new t(e,i);if(e===void 0&&(e={}),e.attributes=e.attributes||{},e.attributes.id=e.id,e.attributes.method=e.method||"POST",e.attributes.action=e.action,this.attributes=e.attributes,this.fields={},this.formJSON=e,e.fields===void 0)e.fields=[];else if(!(e.fields instanceof Array))throw new TypeError("Fields must be defined as an array");for(var r=e.fields.length,o=0;r>o;o++)this.addField(e.fields[o].name,e.fields[o].type,e.fields[o]);if(this.opts={},t.defaultOpts!==void 0)for(var s in t.defaultOpts)this.opts[s]=t.defaultOpts[s];if(i!==void 0)for(var s in i)this.opts[s]=i[s];t.trigger(this,"init")};t.prototype.addField=function(t,e,i,r){return t instanceof UniversalForms.Field?this.fields[t.name]=t:this.fields[t]=new UniversalForms.Field(t,e,i,r)},t.prototype.removeField=function(e){this.fields[e]!==void 0&&delete this.fields[e],t.trigger(this,"removeField")},t.prototype.eachField=function(t,e){for(var i in this.fields)if(t.call(e||this,this.fields[i],i,this.fields)===!1)break},t.on=function(e,i){t._hooks===void 0&&(t._hooks={}),t._hooks[e]===void 0&&(t._hooks[e]=[]),t._hooks[e].push(i)},t.trigger=function(e,i){if(void 0!==t._hooks&&"undefined"!==t._hooks[i])for(var r=0,o=t._hooks[i].length;o>r;r++)t._hooks[i][r].apply(e,Array.prototype.slice.call(arguments,2))},"undefined"!=typeof exports?exports.Form=t:(window.UniversalForms=window.UniversalForms||{},window.UniversalForms.Form=t)}(),function(t,e){var i=t.template("<% for (var attr in obj) print(' ' + attr + '=\"' + obj[attr] + '\"') %>"),r={};r.render=function(e){"string"==typeof e&&(e=t(e));var i=t(this.open()+this.close());return this.eachField(function(t){i.append(t.render())}),this.$el=i,e instanceof t?e.html(this.$el):this.$el},r.open=function(){return"<form"+i(this.attributes)+">"},r.close=function(){return"</form>"},r.field=function(t){return this.fields[t].render()};for(var o in r)e.Form.prototype[o]=r[o];e.Field.prototype.render=function(e){return e===void 0&&(e=a[this.type]),e?(this.$el=t(s(t.extend({tmplAttributes:i,tmplInput:n,tmplField:e},this))),this.$el):void 0};var s=t.template(['<div class="field-wrap <%= type %>">',"<%= (typeof label !=='undefined') ? '<label for=\"' + attributes.id + '\">' + label + '</label>' : '' %>","<%= obj.tmplField(obj) %>","</div>"].join("\n")),n=t.template("<input <%= obj.tmplAttributes(attributes) %>/>"),a={textarea:t.template("<textarea <%= obj.tmplAttributes(attributes) %>><%= value %></textarea>"),select:t.template(["<select <%= obj.tmplAttributes(attributes) %>>","<% for (var val in options.options)","print('<option value=\"' + val + '\"' + ((val == value) ? ' selected' : '') + '>' + options.options[val] + '</option>') %>","</select>"].join("\n")),radio:t.template(""),checkbox:t.template(""),text:n,password:n,submit:n,hidden:n,email:n,search:n,date:n,datetime:n,file:n,number:n,range:n,tel:n,time:n,url:n,color:n,month:n,week:n}}(jQuery,UniversalForms),function(t,e){var i=/([a-z]+)(?:\[(.*)\])?/;e.Form.prototype.validate=function(){var t={rules:{}};this.eachField(function(e){if(e.rules.length>0){t.rules[e.name]={};for(var o=0,s=e.rules.length;s>o;o++){var n=i.exec(e.rules[o]),a=n[1],l=[];n.length>2&&n[2]!==void 0&&(l=n[2].split(",")),t.rules[e.name][r[a].method]=r[a].callback.apply(this,l)}}}),this.$el.validate(t)};var r={required:{method:"required",callback:function(){return!0}},email:{method:"email",callback:function(){return!0}},length:{method:"rangelength",callback:function(t,e){return(t===void 0||""==t)&&(t=0),(e===void 0||""==e)&&(e=Number.MAX_VALUE),[t,e]}},alpha:{method:"alpha",callback:function(){return!0}},matches:{method:"equalTo",callback:function(t){return"[name="+t+"]"}}};t.validator.addMethod("alpha",function(t){return/[a-z]*/i.test(t)},"Please use only alphabetical characters")}(jQuery,UniversalForms);